<!-- Backdrop for mobile -->
@if(isSidebarOpen()) {
  <div (click)="onNavigate(activePage())" class="fixed inset-0 bg-black/30 z-20 lg:hidden"></div>
}

<aside 
  class="fixed inset-y-0 right-0 z-30 w-64 flex-shrink-0 bg-base-100 flex flex-col border-s border-gray-200 transition-transform duration-300 ease-in-out lg:translate-x-0"
  [class.translate-x-0]="isSidebarOpen()"
  [class.translate-x-full]="!isSidebarOpen()">
  <!-- Logo -->
  <div class="h-16 flex items-center justify-center px-4 border-b border-gray-200">
    <img src="assets/logos/press-house-logo.png" alt="Press House Logo" class="h-10">
    <div class="text-right mr-2">
      <h1 class="text-lg font-bold text-ph-blue">بيت الصحافة</h1>
      <p class="text-xs text-gray-500">منصة الصحفي اليمني</p>
    </div>
  </div>

  <!-- Navigation -->
  <nav class="flex-1 px-4 py-6 space-y-2">
    @for (link of navLinks(); track link.key) {
      <a href="javascript:void(0)" 
         (click)="onNavigate(link.key)"
         class="flex items-center px-4 py-2.5 rounded-lg transition-colors duration-200" 
         [class]="activePage() === link.key ? 'bg-ph-blue-light text-ph-blue font-bold' : 'hover:bg-gray-100'">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 ms-3">
          @switch (link.icon) {
            @case ('squares-2x2') { <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 8.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z" /> }
            @case ('sparkles') { <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09ZM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456Z" /> }
            @case ('megaphone') { <path stroke-linecap="round" stroke-linejoin="round" d="M10.25 2.25h-4.5a2.25 2.25 0 0 0-2.25 2.25v9a2.25 2.25 0 0 0 2.25 2.25h4.5a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25Z" /> <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 14.25v2.25a2.25 2.25 0 0 0 2.25 2.25h8.25a2.25 2.25 0 0 0 2.25-2.25v-2.25h-12.75Z" /> <path stroke-linecap="round" stroke-linejoin="round" d="M17.25 9.75h4.5a.75.75 0 0 0 .75-.75V5.25a.75.75 0 0 0-.75-.75h-4.5a.75.75 0 0 0-.75.75v3.75a.75.75 0 0 0 .75.75Z" /> }
            @case ('newspaper') { <path stroke-linecap="round" stroke-linejoin="round" d="M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 0 1-2.25 2.25M16.5 7.5V18a2.25 2.25 0 0 0 2.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 0 0 2.25 2.25h13.5M6 7.5h3v3H6v-3Z" /> }
            @case ('map-alt') { <path stroke-linecap="round" stroke-linejoin="round" d="M9 6.75V15m6-6v8.25m-10.5-6h15M5.25 7.5h13.5a2.25 2.25 0 0 1 2.25 2.25v6.75a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 16.5V9.75a2.25 2.25 0 0 1 2.25-2.25Z" /> }
            @case ('clipboard-document-list') { <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 3.75V16.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 16.5V3.75m12 0a2.25 2.25 0 0 0-2.25-2.25H6.75A2.25 2.25 0 0 0 4.5 3.75m12 0v1.5a2.25 2.25 0 0 1-2.25 2.25H6.75a2.25 2.25 0 0 1-2.25-2.25V3.75m9 6.75h-3m3 3h-3m3 3h-3m-6-3h.008v.008H7.5v-.008Zm0 3h.008v.008H7.5v-.008Zm0-6h.008v.008H7.5v-.008Z" /> }
            @case ('pencil-square') { <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M12 15v5.25A2.25 2.25 0 0 0 14.25 22.5h5.25a2.25 2.25 0 0 0 2.25-2.25V15M12 15H9.75a2.25 2.25 0 0 1-2.25-2.25V5.25A2.25 2.25 0 0 1 9.75 3h5.25a2.25 2.25 0 0 1 2.25 2.25V15" /> }
            @case ('command-line') { <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 7.5 3 11.25l3.75 3.75M17.25 7.5 21 11.25l-3.75 3.75M13.5 19.5 10.5 4.5" /> }
            @case ('users') { <path stroke-linecap="round" stroke-linejoin="round" d="M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-4.683c.65-.935 1-2.104 1-3.328M3 4.5a5.25 5.25 0 0 1 10.5 0v.75a5.25 5.25 0 0 1-10.5 0v-.75Z" /> }
            @case ('beaker') { <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c.238.19.475.384.706.582a13.48 13.48 0 0 1 5.101 4.182 10.95 10.95 0 0 1 2.304 6.332C17.752 21.087 15.09 24 12 24s-5.752-2.913-5.752-6.276a10.95 10.95 0 0 1 2.304-6.332 13.479 13.479 0 0 1 5.101-4.182c.231-.198.468-.392.706-.582Z" /> }
            @case ('archive-box') { <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 7.5l-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z" /> }
            @case ('book-open') { <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25" /> }
            @case ('building-office') { <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6h1.5m-1.5 3h1.5m-1.5 3h1.5M15 21v-3.375c0-.621-.504-1.125-1.125-1.125H10.125c-.621 0-1.125.504-1.125 1.125V21" /> }
          }
        </svg>
        <span class="font-semibold">{{link.name}}</span>
      </a>
    }
    <hr class="my-2 border-gray-200">
     <p class="px-4 text-xs font-semibold text-gray-400 uppercase">البوابات</p>
    @for (link of portalLinks(); track link.key) {
      <a href="javascript:void(0)" 
        (click)="onNavigate(link.key)"
        class="flex items-center px-4 py-2.5 rounded-lg transition-colors duration-200" 
        [class]="activePage() === link.key ? 'bg-ph-blue-light text-ph-blue font-bold' : 'hover:bg-gray-100'">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 ms-3">
          @switch (link.icon) {
            @case ('briefcase') { <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.03 1.121 0 1.131.094 1.976 1.057 1.976 2.192V7.5M12 12.75a.75.75 0 0 1 .75-.75h3.375a.75.75 0 0 1 0 1.5h-3.375a.75.75 0 0 1-.75-.75Zm-4.5-.75a.75.75 0 0 0 0 1.5h.008a.75.75 0 0 0 0-1.5h-.008Zm0 3a.75.75 0 0 0 0 1.5h.008a.75.75 0 0 0 0-1.5h-.008Zm0 3a.75.75 0 0 0 0 1.5h.008a.75.75 0 0 0 0-1.5h-.008ZM12 15a.75.75 0 0 1 .75-.75h3.375a.75.75 0 0 1 0 1.5h-3.375a.75.75 0 0 1-.75-.75Zm0 3a.75.75 0 0 1 .75-.75h3.375a.75.75 0 0 1 0 1.5h-3.375a.75.75 0 0 1-.75-.75Zm-6-3h12a2.25 2.25 0 0 1 2.25 2.25v7.5a2.25 2.25 0 0 1-2.25 2.25H4.5A2.25 2.25 0 0 1 2.25 18v-7.5A2.25 2.25 0 0 1 4.5 8.25Z" /> }
            @case ('shield-exclamation') { <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.007H12v-.007Z" /> }
            @case ('academic-cap') { <path stroke-linecap="round" stroke-linejoin="round" d="M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.627 48.627 0 0 1 12 20.904a48.627 48.627 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.57 50.57 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.697 50.697 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5" /> }
            @case ('lifebuoy') { <path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z" /> }
          }
        </svg>
        <span class="font-semibold">{{link.name}}</span>
      </a>
    }
    <hr class="my-2 border-gray-200">
    @for (link of adminLinks(); track link.key) {
      <a href="javascript:void(0)" 
         (click)="onNavigate(link.key)"
         class="flex items-center px-4 py-2.5 rounded-lg transition-colors duration-200" 
         [class]="activePage() === link.key ? 'bg-ph-blue-light text-ph-blue font-bold' : 'hover:bg-gray-100'">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 ms-3">
          @switch (link.icon) {
            @case ('shield-check') { <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286Zm0 13.036h.008v.008h-.008v-.008Z" /> }
            @case ('bolt') { <path stroke-linecap="round" stroke-linejoin="round" d="m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z" /> }
            @case ('user-plus') { <path stroke-linecap="round" stroke-linejoin="round" d="M19 7.5v3m3-3h-3m-3.75 3A4.5 4.5 0 0 1 12 15v0a4.5 4.5 0 0 1-4.5-4.5v0A4.5 4.5 0 0 1 12 6v0a4.5 4.5 0 0 1 4.5 4.5v0Z" /> }
            @case ('cog-6-tooth') { <path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-1.003 1.11-1.226a11.989 11.989 0 0 1 2.59 0c.55.223 1.02.684 1.11 1.226.09.542-.055 1.14-.422 1.567l-.025.025a1.5 1.5 0 0 0-.232 1.06V8.25c0 .532.22 1.02.585 1.35l.025.025c.367.427.512 1.025.422 1.567-.09.542-.56 1.003-1.11 1.226a11.99 11.99 0 0 1-2.59 0c-.55-.223-1.02-.684-1.11-1.226-.09-.542.055-1.14.422-1.567l.025-.025a1.5 1.5 0 0 0 .232-1.06V8.25a1.5 1.5 0 0 0-.232-1.06l-.025-.025a1.722 1.722 0 0 1-.422-1.567ZM12 15.75a3.75 3.75 0 1 0 0-7.5 3.75 3.75 0 0 0 0 7.5Z" /> }
            @case ('server-stack') { <path stroke-linecap="round" stroke-linejoin="round" d="M6 20.25h12m-7.5-3v3m3-3v3m-10.125-3h17.25c.621 0 1.125-.504 1.125-1.125V4.875c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125Z" /> }
          }
        </svg>
        <span class="font-semibold">{{link.name}}</span>
      </a>
    }
  </nav>

  <!-- Spacer to push content up -->
  <div class="mt-auto"></div>
</aside>